# Chiadog - Chia Farm Watchdog

## Overview
Chiadog is a monitoring tool for Chia cryptocurrency farming. It parses the `debug.log` generated by the Chia process and runs various checks to determine the health of your farm, sending notifications when issues are detected.

## Project Type
- **Type**: Python CLI application (not a web app)
- **Python Version**: 3.11
- **Entry Point**: `main.py`

## Project Structure
```
├── main.py              # Main entry point
├── src/
│   ├── chia_log/        # Log parsing and handling
│   │   ├── handlers/    # Event handlers
│   │   ├── parsers/     # Log parsers
│   │   └── log_consumer.py
│   ├── notifier/        # Notification integrations
│   └── default_config.yaml
├── tests/               # Test suite
├── config-example.yaml  # Example configuration
└── requirements.txt     # Python dependencies
```

## Usage
This application requires:
1. A configuration file (copy `config-example.yaml` to `config.yaml`)
2. Access to Chia's `debug.log` file

Run with:
```bash
python main.py --config config.yaml
```

Or check version:
```bash
python main.py --version
```

## Supported Notifications
- Pushover, Pushcut
- Telegram, Discord, Slack
- Email (SMTP)
- MQTT, Grafana, IFTTT
- Custom shell scripts

## Dependencies
- paramiko (SSH for remote log access)
- python-dateutil
- PyYAML
- retry
- pygtail (log tailing)
- confuse (configuration)

## Recent Changes
- December 2024: Added wins_history feature to track proof wins in JSON format with daily backups
- December 2024: Added support for Chia 2.5.7 log format with V1 proofs and V2 qualities parsing
- December 2024: Added UPDATE_GUIDE.md with instructions for Windows and Ubuntu
- December 2024: Imported to Replit, configured Python 3.11 environment

## Wins History Feature
Enable `wins_history` in config.yaml to track all proof wins:
```yaml
wins_history:
  enable: true
  file_path: "wins_history.json"
  backup_dir: null  # null = same directory as file_path
```
Features:
- Atomic JSON writes (safe from corruption)
- Daily backups (wins_history_YYYY-MM-DD.json)
- Tracks V1 proofs and V2 qualities separately
- Thread-safe for concurrent access

## Documentation
- `UPDATE_GUIDE.md` - Guida aggiornamento per Windows e Ubuntu
- `README.md` - Documentazione principale
- `INTEGRATIONS.md` - Guida configurazione notifiche
